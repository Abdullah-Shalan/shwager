(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=o(a);fetch(a.href,n)}})();const I="http://localhost:5183",g="auth_token",T="auth_role";async function c(e,t={}){try{const o=localStorage.getItem(g),r=new Headers(t.headers||{});!(t.body instanceof FormData)&&!r.has("Content-Type")&&r.set("Content-Type","application/json"),o&&r.set("Authorization",`Bearer ${o}`);const n=e.startsWith("/")?e:`/${e}`;console.log("HTTP Request:",{url:n,method:t.method||"GET",headers:Object.fromEntries(r.entries())});const l=new AbortController,p=setTimeout(()=>l.abort(),1e4);let i;try{console.log("Making fetch request to:",n),i=await fetch(n,{...t,headers:r,signal:l.signal}),clearTimeout(p),console.log("HTTP Response:",{status:i.status,statusText:i.statusText,headers:Object.fromEntries(i.headers.entries())})}catch(u){throw clearTimeout(p),console.error("Fetch error details:",{name:u.name,message:u.message,cause:u.cause}),u.name==="AbortError"?new Error("Request timeout: Server took too long to respond"):u.name==="TypeError"&&u.message.includes("fetch")?new Error("Network error: Unable to connect to server"):u}if(i.status===204)return null;if(!i.ok){const u=i.headers.get("content-type")||"";let b;try{b=u.includes("application/json")?await i.json():await i.text()}catch(C){console.error("Failed to parse response:",C),b=await i.text()}if(console.log("HTTP Response Data:",b),i.status===401)throw localStorage.removeItem(g),new Error("Unauthorized");const m=b&&(b.message||b.error)||i.statusText;throw new Error(m)}const f=(i.headers.get("content-type")||"").includes("application/json")?await i.json():await i.text();return console.log("HTTP Response Data:",f),f}catch(o){throw console.error("HTTP Error:",o),o.name==="TypeError"&&o.message.includes("fetch")?new Error("Network error: Unable to connect to server"):o.name==="TypeError"&&o.message.includes("Load failed")?new Error("Network error: Request failed to load"):o}}function k(e){try{if(!e||typeof e!="string")return console.error("Invalid token format:",e),null;const t=e.split(".");if(t.length!==3)return console.error("Invalid JWT format - expected 3 parts, got:",t.length),null;console.log("JWT parts:",t.map((a,n)=>`Part ${n}: ${a.substring(0,20)}...`));const r=t[1].replace(/-/g,"+").replace(/_/g,"/");console.log("Base64 decoded:",r);try{const a=atob(r);console.log("atob result length:",a.length);const n=decodeURIComponent(a.split("").map(function(l){return"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)}).join(""));return console.log("JSON payload string:",n),JSON.parse(n)}catch(a){console.error("Error in base64 decoding:",a);try{const n=atob(r);return JSON.parse(n)}catch(n){return console.error("Fallback decoding also failed:",n),null}}}catch(t){return console.error("Failed to decode JWT:",t),null}}function L(e){const t=k(e);if(!t)return null;console.log("JWT Payload:",t);const o=t.role||t.Role||t["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]||t["http://schemas.microsoft.com/ws/2008/06/identity/claims/name"]||t["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role"]||t["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"]||null;return console.log("Extracted role:",o),o}function N(e){return k(e)}async function x(e){try{console.log("Attempting login with credentials:",{email:e.email,password:"***"});const t=await c("/api/auth/login",{method:"POST",body:JSON.stringify(e)});console.log("Login response received:",t);const o=typeof t=="string"?t:t.token||t.accessToken||"";if(!o)throw console.error("No token in response:",t),new Error("No token returned from server");console.log("Token extracted:",o.substring(0,50)+"...");const r=L(o);if(console.log("Role extracted:",r),!r){const a=k(o);throw console.error("JWT token structure:",a),new Error("No role found in JWT token. Please check the token structure.")}return localStorage.setItem(g,o),localStorage.setItem(T,r),console.log("Login successful, role:",r),o}catch(t){throw console.error("Login error:",t),t}}async function O(e){return c("/api/auth/candidate/register",{method:"POST",body:JSON.stringify(e)})}async function R(e){return c("/api/auth/hr/register",{method:"POST",body:JSON.stringify(e)})}function q(){localStorage.removeItem(g),localStorage.removeItem(T)}function A(){const e=localStorage.getItem(g);if(!e)return null;const t=L(e);return t&&localStorage.setItem(T,t),t}function F(){console.log("Testing JWT decoding...");const e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c";try{console.log("Testing with sample JWT token...");const t=k(e);return console.log("Sample JWT decoded successfully:",t),!0}catch(t){return console.error("Sample JWT decoding failed:",t),!1}}function D(){console.log("Testing browser atob function...");try{const t=atob("SGVsbG8gV29ybGQ=");return console.log("atob test successful:",t),!0}catch(e){return console.error("atob test failed:",e),!1}}function H(){console.log("Testing browser decodeURIComponent function...");try{const t=decodeURIComponent("%48%65%6c%6c%6f%20%57%6f%72%6c%64");return console.log("decodeURIComponent test successful:",t),!0}catch(e){return console.error("decodeURIComponent test failed:",e),!1}}function M(){console.log("=== Running JWT Tests ===");const e=D(),t=H(),o=F();return console.log("=== Test Results ==="),console.log("atob:",e?"PASS":"FAIL"),console.log("decodeURIComponent:",t?"PASS":"FAIL"),console.log("JWT Decoding:",o?"PASS":"FAIL"),e&&t&&o}async function U(){console.log("=== Testing HTTP Connection ===");try{console.log("Test 1: Testing GET request to /api/auth/login");const e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:"test",password:"test"})});console.log("Response status:",e.status),console.log("Response headers:",Object.fromEntries(e.headers.entries()));const t=await e.text();return console.log("Response body:",t),!0}catch(e){return console.error("HTTP test failed:",e),console.error("Error details:",{name:e.name,message:e.message,stack:e.stack}),!1}}async function W(){console.log("=== Testing Backend Access ===");try{const e=await fetch("http://localhost:5183/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:"test",password:"test"})});console.log("Direct backend response status:",e.status),console.log("Direct backend response headers:",Object.fromEntries(e.headers.entries()));const t=await e.text();return console.log("Direct backend response body:",t),!0}catch(e){return console.error("Direct backend test failed:",e),console.error("Error details:",{name:e.name,message:e.message,stack:e.stack}),!1}}async function V(){console.log("=== Testing Vite Proxy ===");try{const e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:"test",password:"test"})});console.log("Proxy response status:",e.status),console.log("Proxy response headers:",Object.fromEntries(e.headers.entries()));const t=await e.text();return console.log("Proxy response body:",t),!0}catch(e){return console.error("Proxy test failed:",e),console.error("Error details:",{name:e.name,message:e.message,stack:e.stack}),!1}}async function B(){console.log("=== Running All HTTP Tests ===");const e=await U(),t=await W(),o=await V();return console.log("=== HTTP Test Results ==="),console.log("HTTP Connection:",e?"PASS":"FAIL"),console.log("Backend Access:",t?"PASS":"FAIL"),console.log("Vite Proxy:",o?"PASS":"FAIL"),e&&t&&o}const G=()=>c("/api/candidate/available-jobs"),_=()=>c("/api/candidate/assigned-job"),K=e=>c(`/api/candidate/jobs/${e}/assign`,{method:"POST"}),Y=()=>c("/api/candidate/tasks"),z=e=>c(`/api/candidate/tasks/${e}/complete`,{method:"POST"}),Q=()=>c("/api/candidate/view-profile"),X=e=>c("/api/candidate/profile",{method:"PUT",body:JSON.stringify(e)}),Z=e=>{const t=new FormData;return t.append("resume",e),c("/api/candidate/upload-resume",{method:"POST",body:t})},ee=Y,te=X,j=()=>c("/api/hr/jobs"),E=e=>c(`/api/hr/jobs/${e}`),oe=e=>c("/api/hr/jobs",{method:"POST",body:JSON.stringify(e)}),se=(e,t)=>c(`/api/hr/jobs/${e}`,{method:"PUT",body:JSON.stringify(t)}),re=e=>c(`/api/hr/jobs/${e}`,{method:"DELETE"}),ae=(e,t)=>c(`/api/hr/jobs/${e}/tasks`,{method:"POST",body:JSON.stringify(t)}),ne=e=>c(`/api/hr/tasks/${e}`),ie=e=>c(`/api/hr/jobs/${e}/tasks`),ce=(e,t)=>c(`/api/hr/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)}),le=()=>c("/api/hr/candidates"),de=e=>c(`/api/hr/candidates/${e}/profile`),ue=e=>c(`/api/hr/candidates/${e}/tasks`),ge=e=>c(`/api/hr/candidates/${e}`,{method:"DELETE"}),s=e=>document.querySelector(e);function d(e,t,o="info"){e.className=`alert alert-${o}`,e.textContent=t,e.classList.toggle("d-none",!t)}async function me(e){e.preventDefault();const t=s("#login-email").value.trim(),o=s("#login-password").value,r=s("#login-alert");if(!t||!o){d(r,"Please enter both email and password","warning");return}d(r,"Logging in...","info");try{console.log("Starting login process..."),await x({email:t,password:o}),console.log("Login successful, updating UI..."),v();const a=localStorage.getItem(T);if(a){const n=a.toLowerCase()==="candidate"?"#candidate":"#hr",l=document.querySelector(`[data-bs-target="${n}"]`);l&&l.click()}d(r,"Logged in successfully!","success")}catch(a){console.error("Login error in handleLogin:",a);const n=a.message||"Login failed";d(r,`Login failed: ${n}`,"danger")}}async function fe(){const e=s("#reg-role").value,t=s("#reg-alert");d(t,"");try{let o;if(e==="candidate"){if(o={firstName:s("#cand-reg-firstname").value.trim(),lastName:s("#cand-reg-lastname").value.trim(),email:s("#cand-reg-email").value.trim(),password:s("#cand-reg-password").value,resumeUrl:s("#cand-reg-resume").value.trim()},!o.firstName||!o.lastName||!o.email||!o.password||!o.resumeUrl){d(t,"Please fill in all required fields","warning");return}const r=await O(o);d(t,`Candidate registered successfully: ${r.firstName} ${r.lastName}`,"success"),s("#candidate-register-form").reset()}else if(e==="hr"){if(o={firstName:s("#hr-reg-firstname").value.trim(),lastName:s("#hr-reg-lastname").value.trim(),email:s("#hr-reg-email").value.trim(),password:s("#hr-reg-password").value},!o.firstName||!o.lastName||!o.email||!o.password){d(t,"Please fill in all required fields","warning");return}const r=await R(o);d(t,`HR registered successfully: ${r.firstName} ${r.lastName}`,"success"),s("#hr-register-form").reset()}}catch(o){d(t,o.message||"Register failed","danger")}}function v(){const e=localStorage.getItem(g),t=localStorage.getItem(T);s("#auth-status").textContent=e?`Role: ${t||"unknown"} | API: ${I}`:"Not authenticated",s("#logout-btn").classList.toggle("d-none",!e),s("#debug-jwt-btn").classList.toggle("d-none",!e),s("#refresh-role-btn").classList.toggle("d-none",!e);const o=document.querySelector('[data-bs-target="#candidate"]'),r=document.querySelector('[data-bs-target="#hr"]');e&&t?t.toLowerCase()==="candidate"?(o?.classList.remove("d-none"),r?.classList.add("d-none")):t.toLowerCase()==="hr"?(o?.classList.add("d-none"),r?.classList.remove("d-none")):(o?.classList.remove("d-none"),r?.classList.remove("d-none")):(o?.classList.add("d-none"),r?.classList.add("d-none"))}async function S(){await Promise.all([be(),he(),P(),J()])}async function be(){const e=s("#cand-available-tbody");e.innerHTML="";try{const t=await G();for(const o of t||[]){const r=document.createElement("tr");r.innerHTML=`
        <td>${o.id??""}</td>
        <td>${o.title??""}</td>
        <td class="text-end">
          <button class="btn btn-sm btn-outline-primary">Assign</button>
        </td>
      `,r.querySelector("button").addEventListener("click",async()=>{try{await K(o.id),await S()}catch(a){alert(a.message)}}),e.appendChild(r)}}catch(t){e.innerHTML=`<tr><td colspan="3" class="text-danger">${t.message}</td></tr>`}}async function he(){const e=s("#cand-assigned-job");try{const t=await _();e.textContent=JSON.stringify(t??{},null,2)}catch(t){e.textContent=t.message}}async function P(){const e=s("#cand-tasks-tbody");e.innerHTML="";try{const t=await ee();for(const o of t||[]){const r=document.createElement("tr"),a=o.status===2||o.status==="Completed"?"Completed":"Pending",n=o.status===2||o.status==="Completed";r.innerHTML=`
        <td>${o.id??""}</td>
        <td>${o.description??""}</td>
        <td>${a}</td>
        <td class="text-end">
          <button class="btn btn-sm ${n?"btn-success":"btn-outline-success"}" ${n?"disabled":""}>Complete</button>
        </td>
      `,r.querySelector("button").addEventListener("click",async()=>{try{await z(o.id),await P()}catch(l){alert(l.message)}}),e.appendChild(r)}}catch(t){e.innerHTML=`<tr><td colspan="4" class="text-danger">${t.message}</td></tr>`}}async function J(){try{const e=await Q();e&&(s("#cand-profile-firstname").value=e.firstName||"",s("#cand-profile-lastname").value=e.lastName||"")}catch(e){console.error("Failed to load profile:",e),s("#cand-profile-firstname").value="",s("#cand-profile-lastname").value=""}}async function pe(){await Promise.all([h(),w(),$()])}async function h(){const e=s("#hr-jobs-tbody");e.innerHTML="";try{const t=await j();for(const o of t||[]){const r=document.createElement("tr");r.innerHTML=`
        <td>${o.id??""}</td>
        <td>${o.title??""}</td>
        <td class="text-end">
          <button class="btn btn-sm btn-outline-danger">Delete</button>
        </td>
      `,r.querySelector("button").addEventListener("click",async()=>{if(confirm("Delete job?"))try{await re(o.id),await h()}catch(a){alert(a.message)}}),e.appendChild(r)}}catch(t){e.innerHTML=`<tr><td colspan="3" class="text-danger">${t.message}</td></tr>`}}async function w(){const e=s("#hr-cands-tbody"),t=s("#hr-selected-cand");e.innerHTML="",t.textContent="";try{const o=await le();for(const r of o||[]){const a=document.createElement("tr"),n=`${r.firstName??""} ${r.lastName??""}`.trim();a.innerHTML=`
        <td>${r.id??""}</td>
        <td>${n||"(no name)"}</td>
        <td class="text-end">
          <div class="btn-group btn-group-sm">
            <button class="btn btn-outline-secondary">View</button>
            <button class="btn btn-outline-danger">Delete</button>
          </div>
        </td>
      `;const[l,p]=a.querySelectorAll("button");l.addEventListener("click",async()=>{try{const i=await de(r.id),y=await ue(r.id);t.textContent=JSON.stringify({profile:i,tasks:y},null,2)}catch(i){t.textContent=i.message}}),p.addEventListener("click",async()=>{if(confirm("Delete candidate?"))try{await ge(r.id),await w()}catch(i){alert(i.message)}}),e.appendChild(a)}}catch(o){e.innerHTML=`<tr><td colspan="3" class="text-danger">${o.message}</td></tr>`}}async function $(){const e=s("#hr-available-jobs-tbody"),t=s("#hr-available-jobs-alert");e.innerHTML="",d(t,"Loading available jobs...","info");try{const o=await j();if(!o||o.length===0){e.innerHTML='<tr><td colspan="5" class="text-center text-muted">No available jobs found</td></tr>',d(t,"No available jobs found","info");return}for(const r of o){const a=document.createElement("tr"),n=r.jobTasks?r.jobTasks.length:0;a.innerHTML=`
        <td>${r.id??""}</td>
        <td>${r.title??""}</td>
        <td>${(r.description??"").substring(0,100)}${(r.description??"").length>100?"...":""}</td>
        <td>${n}</td>
        <td class="text-end">
          <div class="btn-group btn-group-sm">
            <button class="btn btn-outline-primary btn-view-job">View Details</button>
            <button class="btn btn-outline-success btn-manage-tasks">Manage Tasks</button>
          </div>
        </td>
      `;const l=a.querySelector(".btn-view-job"),p=a.querySelector(".btn-manage-tasks");l.addEventListener("click",async()=>{try{l.disabled=!0,l.textContent="Loading...";const i=await E(r.id),y=await ie(r.id);let f=`
            <div class="modal fade" id="jobDetailsModal" tabindex="-1">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title">Job Details: ${r.title}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                  </div>
                  <div class="modal-body">
                    <div class="row mb-3">
                      <div class="col-md-6">
                        <strong>Job ID:</strong> ${r.id}
                      </div>
                      <div class="col-md-6">
                        <strong>Total Tasks:</strong> ${n}
                      </div>
                    </div>
                    <div class="mb-3">
                      <strong>Description:</strong>
                      <p class="mt-1">${r.description||"No description available"}</p>
                    </div>
                    <div class="mb-3">
                      <strong>Tasks:</strong>
                      <div class="table-responsive mt-2">
                        <table class="table table-sm">
                          <thead>
                            <tr>
                              <th>Order</th>
                              <th>Description</th>
                              <th>File Required</th>
                              <th>Verification Required</th>
                            </tr>
                          </thead>
                          <tbody>`;y&&y.length>0?y.forEach(m=>{f+=`
                <tr>
                  <td>${m.order||"N/A"}</td>
                  <td>${m.description||"N/A"}</td>
                  <td><span class="badge ${m.requiresFile?"bg-success":"bg-secondary"}">${m.requiresFile?"Yes":"No"}</span></td>
                  <td><span class="badge ${m.requiresVerification?"bg-warning":"bg-secondary"}">${m.requiresVerification?"Yes":"No"}</span></td>
                </tr>`}):f+=`
              <tr>
                <td colspan="4" class="text-center text-muted">No tasks found for this job</td>
              </tr>`,f+=`
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="document.getElementById('hr-task-job-id').value='${r.id}'; bootstrap.Modal.getInstance(document.getElementById('jobDetailsModal')).hide();">Create Task for This Job</button>
                  </div>
                </div>
              </div>
            </div>`;const u=document.getElementById("jobDetailsModal");u&&u.remove(),document.body.insertAdjacentHTML("beforeend",f),new bootstrap.Modal(document.getElementById("jobDetailsModal")).show()}catch(i){console.error("Error loading job details:",i),t(`Failed to load job details: ${i.message}`)}finally{l.disabled=!1,l.textContent="View Details"}}),p.addEventListener("click",()=>{s("#hr-task-job-id").value=r.id,document.querySelector('[data-bs-target="#hr"]').click()}),e.appendChild(a)}d(t,`Loaded ${o.length} available jobs successfully`,"success")}catch(o){console.error("Error loading available jobs:",o),e.innerHTML=`<tr><td colspan="5" class="text-danger">Failed to load jobs: ${o.message}</td></tr>`,d(t,`Failed to load jobs: ${o.message}`,"danger")}}s("#login-form").addEventListener("submit",me);s("#register-btn").addEventListener("click",fe);s("#reg-role").addEventListener("change",()=>{const e=s("#reg-role").value,t=s("#candidate-register-form"),o=s("#hr-register-form");e==="candidate"?(t.classList.remove("d-none"),o.classList.add("d-none")):e==="hr"&&(t.classList.add("d-none"),o.classList.remove("d-none"))});s("#reg-role").dispatchEvent(new Event("change"));s("#logout-btn").addEventListener("click",()=>{q(),v();const e=document.querySelector('[data-bs-target="#auth"]');e&&e.click()});s("#refresh-role-btn").addEventListener("click",()=>{const e=A();e?(v(),alert(`Role refreshed: ${e}`)):alert("Failed to refresh role. Please login again.")});s("#debug-jwt-btn").addEventListener("click",()=>{const e=localStorage.getItem(g);if(e){const t=N(e);t?(console.log("JWT Claims:",t),alert(`JWT Claims logged to console. Check browser console for details.

Role: ${t.role||t.Role||"Not found"}`)):alert("Failed to decode JWT token")}else alert("No JWT token found")});s("#test-jwt-btn").addEventListener("click",()=>{const e=M();alert(e?"All JWT tests passed! Check console for details.":"Some JWT tests failed. Check console for details.")});s("#test-http-btn").addEventListener("click",async()=>{try{const e=await B();alert(e?"All HTTP tests passed! Check console for details.":"Some HTTP tests failed. Check console for details.")}catch(e){alert(`HTTP test error: ${e.message}`),console.error("HTTP test error:",e)}});s("#cand-refresh-profile").addEventListener("click",J);s("#cand-save-profile").addEventListener("click",async()=>{const e=s("#cand-alert");try{const t={firstName:s("#cand-profile-firstname").value.trim(),lastName:s("#cand-profile-lastname").value.trim()};if(!t.firstName||!t.lastName){d(e,"Please fill in both first name and last name","warning");return}await te(t),d(e,"Profile saved successfully","success")}catch(t){d(e,t.message,"danger")}});s("#upload-resume-btn").addEventListener("click",async()=>{const e=s("#resume-file").files[0],t=s("#cand-alert");if(!e)return d(t,"Choose a file first","warning");try{await Z(e),d(t,"Resume uploaded","success")}catch(o){d(t,o.message,"danger")}});s("#hr-refresh-jobs").addEventListener("click",h);s("#hr-create-job").addEventListener("click",async()=>{try{const e={title:s("#hr-job-title").value.trim(),description:s("#hr-job-description").value.trim()};if(!e.title||!e.description){alert("Please fill in both job title and description");return}console.log("Creating job with DTO:",e);const t=await oe(e);console.log("Job created successfully:",t),await h(),s("#hr-job-form").reset(),alert("Job created successfully!")}catch(e){console.error("Error creating job:",e),alert(`Failed to create job: ${e.message}`)}});s("#hr-edit-job").addEventListener("click",async()=>{try{const e=Number(s("#hr-edit-job-id").value);if(!e){alert("Please enter Job ID");return}console.log("Loading job for editing:",e);const t=await E(e);t?(s("#hr-edit-job-title").value=t.title||"",s("#hr-edit-job-description").value=t.description||"",alert('Job loaded for editing. Make your changes and click "Save Changes".')):alert("Job not found")}catch(e){console.error("Error loading job:",e),alert(`Failed to load job: ${e.message}`)}});s("#hr-save-edit-job").addEventListener("click",async()=>{try{const e=Number(s("#hr-edit-job-id").value),t={title:s("#hr-edit-job-title").value.trim(),description:s("#hr-edit-job-description").value.trim()};if(!e){alert("Please enter Job ID");return}if(!t.title||!t.description){alert("Please fill in both job title and description");return}console.log("Saving job changes:",{id:e,dto:t}),await se(e,t),await h(),s("#hr-edit-job-id").value="",s("#hr-edit-job-form").reset(),alert("Job updated successfully!")}catch(e){console.error("Error updating job:",e),alert(`Failed to update job: ${e.message}`)}});s("#hr-refresh-candidates").addEventListener("click",w);s("#hr-refresh-available-jobs").addEventListener("click",$);s("#hr-create-task").addEventListener("click",async()=>{try{const e=Number(s("#hr-task-job-id").value),t={description:s("#hr-task-description").value.trim(),requiresFile:s("#hr-task-requires-file").checked,requiresVerification:s("#hr-task-requires-verification").checked};if(!e){alert("Please enter Job ID");return}if(!t.description){alert("Please enter task description");return}console.log("Creating task with DTO:",{jobId:e,dto:t}),console.log("Task DTO details:",{description:t.description,requiresFile:t.requiresFile,requiresVerification:t.requiresVerification,descriptionType:typeof t.description,requiresFileType:typeof t.requiresFile,requiresVerificationType:typeof t.requiresVerification});const o=await ae(e,t);console.log("Task created successfully:",o),await h(),s("#hr-create-task-form").reset(),alert("Task created successfully!")}catch(e){console.error("Error creating task:",e),alert(`Failed to create task: ${e.message}`)}});s("#hr-load-task").addEventListener("click",async()=>{try{const e=Number(s("#hr-edit-task-id").value);if(!e){alert("Please enter Task ID");return}console.log("Loading task for editing:",e);const t=await ne(e);t?(s("#hr-edit-task-description").value=t.task||"",s("#hr-edit-task-requires-file").checked=t.requiresFile||!1,s("#hr-edit-task-requires-verification").checked=t.requiresVerification||!1,alert('Task loaded for editing. Make your changes and click "Save Changes".')):alert("Task not found")}catch(e){console.error("Error loading task:",e),alert(`Failed to load task: ${e.message}`)}});s("#hr-save-edit-task").addEventListener("click",async()=>{try{const e=Number(s("#hr-edit-task-id").value),t={description:s("#hr-edit-task-description").value.trim(),requiresFile:s("#hr-edit-task-requires-file").checked,requiresVerification:s("#hr-edit-task-requires-verification").checked};if(!e){alert("Please enter Task ID");return}if(!t.description){alert("Please enter task description");return}console.log("Saving task changes:",{taskId:e,dto:t}),await ce(e,t),await h(),s("#hr-edit-task-id").value="",s("#hr-edit-task-form").reset(),alert("Task updated successfully!")}catch(e){console.error("Error updating task:",e),alert(`Failed to update task: ${e.message}`)}});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector('[data-bs-target="#candidate"]'),t=document.querySelector('[data-bs-target="#hr"]');e?.addEventListener("shown.bs.tab",()=>{localStorage.getItem(g)&&S()}),t?.addEventListener("shown.bs.tab",()=>{localStorage.getItem(g)&&pe()})});window.addEventListener("error",e=>{console.error("Global error:",e.error),console.error("Error details:",{message:e.error?.message,stack:e.error?.stack,filename:e.filename,lineno:e.lineno,colno:e.colno})});window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason),console.error("Promise rejection details:",{reason:e.reason,stack:e.reason?.stack})});v();
